const _0x5b3b62=_0x4319;(function(_0x27a0cc,_0x2e35c4){const _0x4c0d0f=_0x4319,_0x36ed83=_0x27a0cc();while(!![]){try{const _0x327516=-parseInt(_0x4c0d0f(0x178))/0x1+parseInt(_0x4c0d0f(0x185))/0x2*(-parseInt(_0x4c0d0f(0x190))/0x3)+-parseInt(_0x4c0d0f(0x168))/0x4*(-parseInt(_0x4c0d0f(0x197))/0x5)+parseInt(_0x4c0d0f(0x17c))/0x6*(parseInt(_0x4c0d0f(0x184))/0x7)+-parseInt(_0x4c0d0f(0x16e))/0x8+parseInt(_0x4c0d0f(0x18b))/0x9+parseInt(_0x4c0d0f(0x176))/0xa*(parseInt(_0x4c0d0f(0x175))/0xb);if(_0x327516===_0x2e35c4)break;else _0x36ed83['push'](_0x36ed83['shift']());}catch(_0x5aa436){_0x36ed83['push'](_0x36ed83['shift']());}}}(_0x53c5,0x2e349));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x5b3b62(0x16b)),ff=require('fluent-ffmpeg'),webp=require(_0x5b3b62(0x195)),path=require(_0x5b3b62(0x189));function _0x4319(_0x400a18,_0x2dfed3){const _0x53c557=_0x53c5();return _0x4319=function(_0x4319f1,_0x14bdf4){_0x4319f1=_0x4319f1-0x166;let _0x139909=_0x53c557[_0x4319f1];return _0x139909;},_0x4319(_0x400a18,_0x2dfed3);}async function imageToWebp(_0x34c618){const _0x18bb47=_0x5b3b62,_0x36a5a2=path[_0x18bb47(0x199)](tmpdir(),Crypto[_0x18bb47(0x167)](0x6)[_0x18bb47(0x18c)](0x0,0x6)[_0x18bb47(0x171)](0x24)+_0x18bb47(0x179)),_0x15a415=path['join'](tmpdir(),Crypto['randomBytes'](0x6)[_0x18bb47(0x18c)](0x0,0x6)[_0x18bb47(0x171)](0x24)+'.jpg');fs[_0x18bb47(0x172)](_0x15a415,_0x34c618),await new Promise((_0x14689e,_0x5560f3)=>{const _0x4ad4c5=_0x18bb47;ff(_0x15a415)['on']('error',_0x5560f3)['on'](_0x4ad4c5(0x17f),()=>_0x14689e(!![]))[_0x4ad4c5(0x16f)](['-vcodec','libwebp','-vf','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse'])[_0x4ad4c5(0x16d)](_0x4ad4c5(0x193))['save'](_0x36a5a2);});const _0x2b3eea=fs['readFileSync'](_0x36a5a2);return fs['unlinkSync'](_0x36a5a2),fs[_0x18bb47(0x18e)](_0x15a415),_0x2b3eea;}async function videoToWebp(_0x7cc32c){const _0x3df4f0=_0x5b3b62,_0x1098d3=path[_0x3df4f0(0x199)](tmpdir(),Crypto[_0x3df4f0(0x167)](0x6)[_0x3df4f0(0x18c)](0x0,0x6)['toString'](0x24)+_0x3df4f0(0x179)),_0xa491a2=path['join'](tmpdir(),Crypto[_0x3df4f0(0x167)](0x6)[_0x3df4f0(0x18c)](0x0,0x6)[_0x3df4f0(0x171)](0x24)+_0x3df4f0(0x174));fs['writeFileSync'](_0xa491a2,_0x7cc32c),await new Promise((_0x2734a5,_0x2c6893)=>{const _0x437a41=_0x3df4f0;ff(_0xa491a2)['on']('error',_0x2c6893)['on']('end',()=>_0x2734a5(!![]))[_0x437a41(0x16f)]([_0x437a41(0x166),_0x437a41(0x18d),_0x437a41(0x19c),_0x437a41(0x192),_0x437a41(0x198),'0',_0x437a41(0x19a),_0x437a41(0x16c),'-t',_0x437a41(0x170),_0x437a41(0x196),_0x437a41(0x194),'-an',_0x437a41(0x17b),'0'])['toFormat']('webp')[_0x437a41(0x181)](_0x1098d3);});const _0x29799b=fs[_0x3df4f0(0x186)](_0x1098d3);return fs[_0x3df4f0(0x18e)](_0x1098d3),fs[_0x3df4f0(0x18e)](_0xa491a2),_0x29799b;}async function writeExifImg(_0x57f37a,_0x167808){const _0x132b65=_0x5b3b62;let _0x98e9b8=await imageToWebp(_0x57f37a);const _0x491e13=path['join'](tmpdir(),Crypto[_0x132b65(0x167)](0x6)[_0x132b65(0x18c)](0x0,0x6)[_0x132b65(0x171)](0x24)+'.webp'),_0x2754af=path[_0x132b65(0x199)](tmpdir(),Crypto[_0x132b65(0x167)](0x6)['readUIntLE'](0x0,0x6)[_0x132b65(0x171)](0x24)+_0x132b65(0x179));fs[_0x132b65(0x172)](_0x491e13,_0x98e9b8);if(_0x167808['packname']||_0x167808['author']){const _0x435b80=new webp[(_0x132b65(0x18f))](),_0x49e0a0={'sticker-pack-id':_0x132b65(0x177),'sticker-pack-name':_0x167808[_0x132b65(0x173)],'sticker-pack-publisher':_0x167808[_0x132b65(0x17a)],'emojis':_0x167808[_0x132b65(0x180)]?_0x167808[_0x132b65(0x180)]:['']},_0x26ad2f=Buffer[_0x132b65(0x17d)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x446d1a=Buffer[_0x132b65(0x17d)](JSON[_0x132b65(0x182)](_0x49e0a0),_0x132b65(0x169)),_0x22996d=Buffer[_0x132b65(0x183)]([_0x26ad2f,_0x446d1a]);return _0x22996d['writeUIntLE'](_0x446d1a[_0x132b65(0x17e)],0xe,0x4),await _0x435b80[_0x132b65(0x16a)](_0x491e13),fs['unlinkSync'](_0x491e13),_0x435b80[_0x132b65(0x18a)]=_0x22996d,await _0x435b80[_0x132b65(0x181)](_0x2754af),_0x2754af;}}async function writeExifVid(_0xa28756,_0x28eee8){const _0x200a60=_0x5b3b62;let _0x55b446=await videoToWebp(_0xa28756);const _0x4fd069=path['join'](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x200a60(0x171)](0x24)+_0x200a60(0x179)),_0x4478c6=path['join'](tmpdir(),Crypto[_0x200a60(0x167)](0x6)[_0x200a60(0x18c)](0x0,0x6)['toString'](0x24)+_0x200a60(0x179));fs['writeFileSync'](_0x4fd069,_0x55b446);if(_0x28eee8[_0x200a60(0x173)]||_0x28eee8[_0x200a60(0x17a)]){const _0x48b2d5=new webp['Image'](),_0x1f5701={'sticker-pack-id':_0x200a60(0x177),'sticker-pack-name':_0x28eee8[_0x200a60(0x173)],'sticker-pack-publisher':_0x28eee8['author'],'emojis':_0x28eee8[_0x200a60(0x180)]?_0x28eee8[_0x200a60(0x180)]:['']},_0x5d3734=Buffer[_0x200a60(0x17d)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x53ec1d=Buffer[_0x200a60(0x17d)](JSON[_0x200a60(0x182)](_0x1f5701),'utf-8'),_0x5b10f8=Buffer[_0x200a60(0x183)]([_0x5d3734,_0x53ec1d]);return _0x5b10f8['writeUIntLE'](_0x53ec1d[_0x200a60(0x17e)],0xe,0x4),await _0x48b2d5[_0x200a60(0x16a)](_0x4fd069),fs[_0x200a60(0x18e)](_0x4fd069),_0x48b2d5[_0x200a60(0x18a)]=_0x5b10f8,await _0x48b2d5[_0x200a60(0x181)](_0x4478c6),_0x4478c6;}}async function writeExif(_0x1e8e56,_0x5c0f2f){const _0x4d7d65=_0x5b3b62;let _0x19372e=/webp/[_0x4d7d65(0x19b)](_0x1e8e56[_0x4d7d65(0x191)])?_0x1e8e56[_0x4d7d65(0x188)]:/image/[_0x4d7d65(0x19b)](_0x1e8e56['mimetype'])?await imageToWebp(_0x1e8e56[_0x4d7d65(0x188)]):/video/['test'](_0x1e8e56[_0x4d7d65(0x191)])?await videoToWebp(_0x1e8e56[_0x4d7d65(0x188)]):'';const _0x495cc2=path['join'](tmpdir(),Crypto['randomBytes'](0x6)[_0x4d7d65(0x18c)](0x0,0x6)[_0x4d7d65(0x171)](0x24)+'.webp'),_0x3493ac=path[_0x4d7d65(0x199)](tmpdir(),Crypto[_0x4d7d65(0x167)](0x6)[_0x4d7d65(0x18c)](0x0,0x6)[_0x4d7d65(0x171)](0x24)+'.webp');fs[_0x4d7d65(0x172)](_0x495cc2,_0x19372e);if(_0x5c0f2f['packname']||_0x5c0f2f['author']){const _0xd06db2=new webp[(_0x4d7d65(0x18f))](),_0x1437bf={'sticker-pack-id':_0x4d7d65(0x177),'sticker-pack-name':_0x5c0f2f['packname'],'sticker-pack-publisher':_0x5c0f2f['author'],'emojis':_0x5c0f2f[_0x4d7d65(0x180)]?_0x5c0f2f[_0x4d7d65(0x180)]:['']},_0xc9bd0e=Buffer[_0x4d7d65(0x17d)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4895bf=Buffer[_0x4d7d65(0x17d)](JSON[_0x4d7d65(0x182)](_0x1437bf),_0x4d7d65(0x169)),_0x3f81f1=Buffer[_0x4d7d65(0x183)]([_0xc9bd0e,_0x4895bf]);return _0x3f81f1['writeUIntLE'](_0x4895bf[_0x4d7d65(0x17e)],0xe,0x4),await _0xd06db2['load'](_0x495cc2),fs[_0x4d7d65(0x18e)](_0x495cc2),_0xd06db2['exif']=_0x3f81f1,await _0xd06db2['save'](_0x3493ac),_0x3493ac;}}module[_0x5b3b62(0x187)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};function _0x53c5(){const _0x39f13f=['libwebp','unlinkSync','Image','790143nKjZTy','mimetype','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','webp','default','node-webpmux','-preset','215FKftCf','-loop','join','-ss','test','-vf','-vcodec','randomBytes','3164wgVeDc','utf-8','load','crypto','00:00:00','toFormat','2188736rOAWjW','addOutputOptions','00:00:05','toString','writeFileSync','packname','.mp4','1881qVABSP','37320cUiwlA','https://github.com/DikaArdnt/Hisoka-Morou','278121dZSUfT','.webp','author','-vsync','6ZZuNLR','from','length','end','categories','save','stringify','concat','1480913WfBUOv','2URZamB','readFileSync','exports','data','path','exif','1085463OkESBd','readUIntLE'];_0x53c5=function(){return _0x39f13f;};return _0x53c5();}
